var ta,co,ce,eblk,hashtrun;function recordData(t,e,a,n,o){ta=t,co=e,ce=a,eblk=n,hashtrun=o,console.log("data record")}function summitNormal(){summitData(ta,co,ce,eblk,hashtrun)}function summitErr(){summitData(ta,1e3,ce,eblk,hashtrun)}function summitData(t,e,a,n,o){SendCall(USER_ACCOUNT[0].Num,"verifyReceiveData",{TeraAccNum:t,coinNum:e,centNum:a,EthCurBlkNum:n,EthTxTruncate:o},USER_ACCOUNT[0].Num),console.log("summitData:"),console.log({TeraAccNum:t,coinNum:e,centNum:a,EthCurBlkNum:n,EthTxTruncate:o})}function testStart(){SendCall(USER_ACCOUNT[0].Num,"broadcastVerifyReq",{},USER_ACCOUNT[0].Num)}function verify1(a){web3=new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/9445f38252af49668e444e18b92e3520"));new web3.eth.Contract([{constant:!1,inputs:[{name:"TeraAccountNum",type:"uint48"}],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!1,name:"TeraAcc",type:"uint48"},{indexed:!1,name:"coins",type:"uint256"},{indexed:!1,name:"cents",type:"uint256"}],name:"depositEvent",type:"event"},{constant:!0,inputs:[],name:"getTotalBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],"0x2dba0827ed556f6b4660ff36912f82cd27f52479");var n=-1;web3.eth.getPastLogs({fromBlock:a.EthCurBlkNum,toBlock:"latest",address:"0x2dba0827ed556f6b4660ff36912f82cd27f52479",topics:["0xc4da2b6d2e45f545d78cf7310c4d9b3b32fdc81b08c9a5c4a6bf48a923f2dfd5"]}).then(function(t){(console.log("eventLogs:"),console.log(t),t.find(function(t,e){return n=e,-1!=t.transactionHash.indexOf(a.EthTxTruncate)}),-1!=n&&n+1<t.length)?recordData(parseInt(t[n+1].data.substr(0,66)),parseInt("0x"+t[n+1].data.substr(66,64)),parseInt("0x"+t[n+1].data.substr(130,64)),t[n+1].blockNumber,t[n+1].transactionHash.substr(2,10)):recordData(0,0,0,t[t.length-1].blockNumber,t[t.length-1].transactionHash.substr(2,10))})}function verify2(){}function verify3(){}function addErrInfoToBlk(t){SendCall(USER_ACCOUNT[0].Num,"addErrInfoBlk",t,USER_ACCOUNT[0].Num)}function testFunc(){GetAccountList({StartNum:parseInt(document.getElementById("idInp").value),CountNum:1},function(t,e){t||(console.log("GetAccountList:"),console.log(e))})}window.addEventListener("Event",function(t){if(Data=t.detail,Data.Error)SetError(Data.Description);else if("eventName"in Data.Description)switch(Data.Description.eventName){case"verify":verify1(Data.Description);break;case"info":console.log("Event:"),console.log(Data.Description);break;case"receiveDataErr":console.log("receiveDataErr:"),console.log(Data.Description),addErrInfoToBlk(Data.Description)}});